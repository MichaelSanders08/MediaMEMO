import{__spreadArray}from"tslib";
/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */import{w as win}from"./index-7a14ecec.js";import{r as raf}from"./helpers-3379ba19.js";var animationPrefix;var processKeyframes=function(e){e.forEach((function(e){for(var n in e){if(e.hasOwnProperty(n)){var r=e[n];if(n==="easing"){var t="animation-timing-function";e[t]=r;delete e[n]}else{var t=convertCamelCaseToHypen(n);if(t!==n){e[t]=r;delete e[n]}}}}}));return e};var convertCamelCaseToHypen=function(e){return e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()};var getAnimationPrefix=function(e){if(animationPrefix===undefined){var n=e.style.animationName!==undefined;var r=e.style.webkitAnimationName!==undefined;animationPrefix=!n&&r?"-webkit-":""}return animationPrefix};var setStyleProperty=function(e,n,r){var t=n.startsWith("animation")?getAnimationPrefix(e):"";e.style.setProperty(t+n,r)};var removeStyleProperty=function(e,n){var r=n.startsWith("animation")?getAnimationPrefix(e):"";e.style.removeProperty(r+n)};var animationEnd=function(e,n){var r;var t={passive:true};var a=function(){if(r){r()}};var i=function(r){if(e===r.target){a();n(r)}};if(e){e.addEventListener("webkitAnimationEnd",i,t);e.addEventListener("animationend",i,t);r=function(){e.removeEventListener("webkitAnimationEnd",i,t);e.removeEventListener("animationend",i,t)}}return a};var generateKeyframeRules=function(e){if(e===void 0){e=[]}return e.map((function(e){var n=e.offset;var r=[];for(var t in e){if(e.hasOwnProperty(t)&&t!=="offset"){r.push("".concat(t,": ").concat(e[t],";"))}}return"".concat(n*100,"% { ").concat(r.join(" ")," }")})).join(" ")};var keyframeIds=[];var generateKeyframeName=function(e){var n=keyframeIds.indexOf(e);if(n<0){n=keyframeIds.push(e)-1}return"ion-animation-".concat(n)};var getStyleContainer=function(e){var n=e.getRootNode!==undefined?e.getRootNode():e;return n.head||n};var createKeyframeStylesheet=function(e,n,r){var t;var a=getStyleContainer(r);var i=getAnimationPrefix(r);var o=a.querySelector("#"+e);if(o){return o}var f=((t=r.ownerDocument)!==null&&t!==void 0?t:document).createElement("style");f.id=e;f.textContent="@".concat(i,"keyframes ").concat(e," { ").concat(n," } @").concat(i,"keyframes ").concat(e,"-alt { ").concat(n," }");a.appendChild(f);return f};var addClassToArray=function(e,n){if(e===void 0){e=[]}if(n!==undefined){var r=Array.isArray(n)?n:[n];return __spreadArray(__spreadArray([],e,true),r,true)}return e};var createAnimation=function(e){var n;var r;var t;var a;var i;var o;var f=[];var u=[];var c=[];var s=false;var v;var l={};var d=[];var m=[];var y={};var p=0;var h=false;var g=false;var E;var P;var S;var A;var C=true;var T=false;var b=true;var w;var k;var x=false;var K=e;var _=[];var I=[];var R=[];var N=[];var D=[];var L=[];var F=[];var O=[];var W=[];var j=[];var H=[];var M=typeof AnimationEffect==="function"||win!==undefined&&typeof win.AnimationEffect==="function";var $=typeof Element==="function"&&typeof Element.prototype.animate==="function"&&M;var q=100;var z=function(){return H};var Z=function(e){D.forEach((function(n){n.destroy(e)}));B(e);N.length=0;D.length=0;f.length=0;X();s=false;b=true;return k};var B=function(e){Y();if(e){ee()}};var G=function(){h=false;g=false;b=true;P=undefined;S=undefined;A=undefined;p=0;T=false;C=true;x=false};var J=function(){return p!==0&&!x};var Q=function(e,n){var r=n.findIndex((function(n){return n.c===e}));if(r>-1){n.splice(r,1)}};var U=function(e,n){R.push({c:e,o:n});return k};var V=function(e,n){var r=(n===null||n===void 0?void 0:n.oneTimeCallback)?I:_;r.push({c:e,o:n});return k};var X=function(){_.length=0;I.length=0;return k};var Y=function(){if($){H.forEach((function(e){e.cancel()}));H.length=0}else{var e=N.slice();raf((function(){e.forEach((function(e){removeStyleProperty(e,"animation-name");removeStyleProperty(e,"animation-duration");removeStyleProperty(e,"animation-timing-function");removeStyleProperty(e,"animation-iteration-count");removeStyleProperty(e,"animation-delay");removeStyleProperty(e,"animation-play-state");removeStyleProperty(e,"animation-fill-mode");removeStyleProperty(e,"animation-direction")}))}))}};var ee=function(){L.forEach((function(e){if(e===null||e===void 0?void 0:e.parentNode){e.parentNode.removeChild(e)}}));L.length=0};var ne=function(e){F.push(e);return k};var re=function(e){O.push(e);return k};var te=function(e){W.push(e);return k};var ae=function(e){j.push(e);return k};var ie=function(e){u=addClassToArray(u,e);return k};var oe=function(e){c=addClassToArray(c,e);return k};var fe=function(e){if(e===void 0){e={}}l=e;return k};var ue=function(e){if(e===void 0){e=[]}for(var n=0,r=e;n<r.length;n++){var t=r[n];l[t]=""}return k};var ce=function(e){d=addClassToArray(d,e);return k};var se=function(e){m=addClassToArray(m,e);return k};var ve=function(e){if(e===void 0){e={}}y=e;return k};var le=function(e){if(e===void 0){e=[]}for(var n=0,r=e;n<r.length;n++){var t=r[n];y[t]=""}return k};var de=function(){if(i!==undefined){return i}if(v){return v.getFill()}return"both"};var me=function(){if(P!==undefined){return P}if(o!==undefined){return o}if(v){return v.getDirection()}return"normal"};var ye=function(){if(h){return"linear"}if(t!==undefined){return t}if(v){return v.getEasing()}return"linear"};var pe=function(){if(g){return 0}if(S!==undefined){return S}if(r!==undefined){return r}if(v){return v.getDuration()}return 0};var he=function(){if(a!==undefined){return a}if(v){return v.getIterations()}return 1};var ge=function(){if(A!==undefined){return A}if(n!==undefined){return n}if(v){return v.getDelay()}return 0};var Ee=function(){return f};var Pe=function(e){o=e;He(true);return k};var Se=function(e){i=e;He(true);return k};var Ae=function(e){n=e;He(true);return k};var Ce=function(e){t=e;He(true);return k};var Te=function(e){if(!$&&e===0){e=1}r=e;He(true);return k};var be=function(e){a=e;He(true);return k};var we=function(e){v=e;return k};var ke=function(e){if(e!=null){if(e.nodeType===1){N.push(e)}else if(e.length>=0){for(var n=0;n<e.length;n++){N.push(e[n])}}else{console.error("Invalid addElement value")}}return k};var xe=function(e){if(e!=null){if(Array.isArray(e)){for(var n=0,r=e;n<r.length;n++){var t=r[n];t.parent(k);D.push(t)}}else{e.parent(k);D.push(e)}}return k};var Ke=function(e){var n=f!==e;f=e;if(n){_e(f)}return k};var _e=function(e){if($){z().forEach((function(n){if(n.effect.setKeyframes){n.effect.setKeyframes(e)}else{var r=new KeyframeEffect(n.effect.target,e,n.effect.getTiming());n.effect=r}}))}else{De()}};var Ie=function(){F.forEach((function(e){return e()}));O.forEach((function(e){return e()}));var e=u;var n=c;var r=l;N.forEach((function(t){var a=t.classList;e.forEach((function(e){return a.add(e)}));n.forEach((function(e){return a.remove(e)}));for(var i in r){if(r.hasOwnProperty(i)){setStyleProperty(t,i,r[i])}}}))};var Re=function(){Ge();W.forEach((function(e){return e()}));j.forEach((function(e){return e()}));var e=C?1:0;var n=d;var r=m;var t=y;N.forEach((function(e){var a=e.classList;n.forEach((function(e){return a.add(e)}));r.forEach((function(e){return a.remove(e)}));for(var i in t){if(t.hasOwnProperty(i)){setStyleProperty(e,i,t[i])}}}));_.forEach((function(n){return n.c(e,k)}));I.forEach((function(n){return n.c(e,k)}));I.length=0;b=true;if(C){T=true}C=true};var Ne=function(){if(p===0){return}p--;if(p===0){Re();if(v){v.animationFinish()}}};var De=function(n){if(n===void 0){n=true}ee();var r=processKeyframes(f);N.forEach((function(t){if(r.length>0){var a=generateKeyframeRules(r);w=e!==undefined?e:generateKeyframeName(a);var i=createKeyframeStylesheet(w,a,t);L.push(i);setStyleProperty(t,"animation-duration","".concat(pe(),"ms"));setStyleProperty(t,"animation-timing-function",ye());setStyleProperty(t,"animation-delay","".concat(ge(),"ms"));setStyleProperty(t,"animation-fill-mode",de());setStyleProperty(t,"animation-direction",me());var o=he()===Infinity?"infinite":he().toString();setStyleProperty(t,"animation-iteration-count",o);setStyleProperty(t,"animation-play-state","paused");if(n){setStyleProperty(t,"animation-name","".concat(i.id,"-alt"))}raf((function(){setStyleProperty(t,"animation-name",i.id||null)}))}}))};var Le=function(){N.forEach((function(e){var n=e.animate(f,{id:K,delay:ge(),duration:pe(),easing:ye(),iterations:he(),fill:de(),direction:me()});n.pause();H.push(n)}));if(H.length>0){H[0].onfinish=function(){Ne()}}};var Fe=function(e){if(e===void 0){e=true}Ie();if(f.length>0){if($){Le()}else{De(e)}}s=true};var Oe=function(e){e=Math.min(Math.max(e,0),.9999);if($){H.forEach((function(n){n.currentTime=n.effect.getComputedTiming().delay+pe()*e;n.pause()}))}else{var n="-".concat(pe()*e,"ms");N.forEach((function(e){if(f.length>0){setStyleProperty(e,"animation-delay",n);setStyleProperty(e,"animation-play-state","paused")}}))}};var We=function(e){H.forEach((function(e){e.effect.updateTiming({delay:ge(),duration:pe(),easing:ye(),iterations:he(),fill:de(),direction:me()})}));if(e!==undefined){Oe(e)}};var je=function(e,n){if(e===void 0){e=true}raf((function(){N.forEach((function(r){setStyleProperty(r,"animation-name",w||null);setStyleProperty(r,"animation-duration","".concat(pe(),"ms"));setStyleProperty(r,"animation-timing-function",ye());setStyleProperty(r,"animation-delay",n!==undefined?"-".concat(n*pe(),"ms"):"".concat(ge(),"ms"));setStyleProperty(r,"animation-fill-mode",de()||null);setStyleProperty(r,"animation-direction",me()||null);var t=he()===Infinity?"infinite":he().toString();setStyleProperty(r,"animation-iteration-count",t);if(e){setStyleProperty(r,"animation-name","".concat(w,"-alt"))}raf((function(){setStyleProperty(r,"animation-name",w||null)}))}))}))};var He=function(e,n,r){if(e===void 0){e=false}if(n===void 0){n=true}if(e){D.forEach((function(t){t.update(e,n,r)}))}if($){We(r)}else{je(n,r)}return k};var Me=function(e,n){if(e===void 0){e=false}D.forEach((function(r){r.progressStart(e,n)}));ze();h=e;if(!s){Fe()}He(false,true,n);return k};var $e=function(e){D.forEach((function(n){n.progressStep(e)}));Oe(e);return k};var qe=function(e,n,r){h=false;D.forEach((function(t){t.progressEnd(e,n,r)}));if(r!==undefined){S=r}T=false;C=true;if(e===0){P=me()==="reverse"?"normal":"reverse";if(P==="reverse"){C=false}if($){He();Oe(1-n)}else{A=(1-n)*pe()*-1;He(false,false)}}else if(e===1){if($){He();Oe(n)}else{A=n*pe()*-1;He(false,false)}}if(e!==undefined){V((function(){S=undefined;P=undefined;A=undefined}),{oneTimeCallback:true});if(!v){Xe()}}return k};var ze=function(){if(s){if($){H.forEach((function(e){e.pause()}))}else{N.forEach((function(e){setStyleProperty(e,"animation-play-state","paused")}))}x=true}};var Ze=function(){D.forEach((function(e){e.pause()}));ze();return k};var Be=function(){E=undefined;Ne()};var Ge=function(){if(E){clearTimeout(E)}};var Je=function(){Ge();raf((function(){N.forEach((function(e){if(f.length>0){setStyleProperty(e,"animation-play-state","running")}}))}));if(f.length===0||N.length===0){Ne()}else{var e=ge()||0;var n=pe()||0;var r=he()||1;if(isFinite(r)){E=setTimeout(Be,e+n*r+q)}animationEnd(N[0],(function(){Ge();raf((function(){Qe();raf(Ne)}))}))}};var Qe=function(){N.forEach((function(e){removeStyleProperty(e,"animation-duration");removeStyleProperty(e,"animation-delay");removeStyleProperty(e,"animation-play-state")}))};var Ue=function(){H.forEach((function(e){e.play()}));if(f.length===0||N.length===0){Ne()}};var Ve=function(){if($){Oe(0);We()}else{je()}};var Xe=function(e){return new Promise((function(n){if(e===null||e===void 0?void 0:e.sync){g=true;V((function(){return g=false}),{oneTimeCallback:true})}if(!s){Fe()}if(T){Ve();T=false}if(b){p=D.length+1;b=false}var r=function(){Q(t,I);n()};var t=function(){Q(r,R);n()};V(t,{oneTimeCallback:true});U(r,{oneTimeCallback:true});D.forEach((function(e){e.play()}));if($){Ue()}else{Je()}x=false}))};var Ye=function(){D.forEach((function(e){e.stop()}));if(s){Y();s=false}G();R.forEach((function(e){return e.c(0,k)}));R.length=0};var en=function(e,n){var r;var t=f[0];if(t!==undefined&&(t.offset===undefined||t.offset===0)){t[e]=n}else{f=__spreadArray([(r={offset:0},r[e]=n,r)],f,true)}return k};var nn=function(e,n){var r;var t=f[f.length-1];if(t!==undefined&&(t.offset===undefined||t.offset===1)){t[e]=n}else{f=__spreadArray(__spreadArray([],f,true),[(r={offset:1},r[e]=n,r)],false)}return k};var rn=function(e,n,r){return en(e,n).to(e,r)};return k={parentAnimation:v,elements:N,childAnimations:D,id:K,animationFinish:Ne,from:en,to:nn,fromTo:rn,parent:we,play:Xe,pause:Ze,stop:Ye,destroy:Z,keyframes:Ke,addAnimation:xe,addElement:ke,update:He,fill:Se,direction:Pe,iterations:be,duration:Te,easing:Ce,delay:Ae,getWebAnimations:z,getKeyframes:Ee,getFill:de,getDirection:me,getDelay:ge,getIterations:he,getEasing:ye,getDuration:pe,afterAddRead:te,afterAddWrite:ae,afterClearStyles:le,afterStyles:ve,afterRemoveClass:se,afterAddClass:ce,beforeAddRead:ne,beforeAddWrite:re,beforeClearStyles:ue,beforeStyles:fe,beforeRemoveClass:oe,beforeAddClass:ie,onFinish:V,isRunning:J,progressStart:Me,progressStep:$e,progressEnd:qe}};export{createAnimation as c};